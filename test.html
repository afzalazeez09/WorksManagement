# exlude list = failed branch condition or not yet reached branch condition
SELECT taskToLabourResource.id
FROM tbl_task_to_labour_resource taskToLabourResource
JOIN tbl_labour_resource_data labourResourceData
	ON taskToLabourResource.labour_resource_data_id = labourResourceData.id
JOIN tbl_action_to_labour_resource actionToLabourResource
	ON labourResourceData.action_to_labour_resource_id = actionToLabourResource.action_to_labour_resource_id
JOIN tbl_action_to_labour_resource_branch actionToLabourResourceBranch
	ON actionToLabourResource.id = actionToLabourResourceBranch.id
JOIN tbl_duty duty
	ON taskToLabourResource.task_id = duty.task_id
JOIN tbl_duty_data dutyData
	ON duty.duty_data_id = dutyData.id
JOIN tbl_duty_data_to_duty_step_to_custom_field dutyDataToDutyStepToCustomField
	ON actionToLabourResourceBranch.duty_step_to_custom_field_id = dutyDataToDutyStepToCustomField.duty_step_to_custom_field_id
	AND dutyData.id = dutyDataToDutyStepToCustomField.duty_data_id
	AND (dutyData.updated IS NULL OR NOT dutyDataToDutyStepToCustomField.custom_value REGEXP actionToLabourResourceBranch.compare)
